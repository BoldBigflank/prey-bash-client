#!/bin/bash
####################################################################
# PREY Base Functions - by Tomas Pollak (bootlog.org)
# URL : http://prey.bootlog.org
# License: GPLv3
####################################################################

getter='curl -s'

# returns if we have have network access, otherwise 0
function check_net_status {
	# first line checks for LAN access, second one for web access. change it if you're using Prey in a closed environment.
	# net_status=`ping -q -w 1 -c 1 \`ip r | grep default | cut -d ' ' -f 3\` > /dev/null && echo 1 || echo 0`
	net_status=`ping -c 1 -t 1 www.google.com > /dev/null && echo 1 || echo 0`
}

# we could eventually use a different method for status checking
function check_status {
	status=`$getter -I $url | awk /HTTP/ | sed 's/[^200|302|400|404|500]//g'`
	if [ $status == '200' ]; then
		activate=1
	fi
}

# this is where the magic will happen. :)
function parse_response {
	response=`$getter $url`
}
